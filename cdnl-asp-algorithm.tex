% ----------------------------------------------------------------------
\begin{frame}{Outline of CDNL-ASP algorithm}
  \begin{itemize}
  \item<2-> Keep track of deterministic consequences by unit propagation on
    \begin{itemize}\only<-2>{\normalsize}
    \item program completion \hfill [$\Delta_P$]%
    \item loop nogoods, determined and recorded on demand \hfill [$\Lambda_P$]%
    \item dynamic nogoods, derived from conflicts and unfounded sets \hfill[$\nabla$]%
    \end{itemize}
    \only<3->{\smallskip}
  \item<4-> When a nogood in $\Delta_P\cup\nabla$ becomes \alert<3>{violated}
    \begin{enumerate}\only<5-10>{\normalsize}
    \item<5-> \alert<5-9>{analyze}
      \uncover<6,15>{the conflict by resolution%
        \only<-10>{\par} (until reaching a \only<-10>{Unique Implication Point;}  UIP)}
    \item<5-> \alert<5-9>{learn}
      \uncover<7,15>{the derived conflict nogood~$\delta$}
    \item<5-> \alert<5-9>{backjump}
      \uncover<8,15>{to the earliest (heuristic) choice such that the
        \par complement of the UIP is unit-resulting for $\delta$}
    \item<5-> \alert<5-9>{assert}
      \uncover<9,15>{the complement of the UIP and proceed%
        \only<-10>{\par} (with unit propagation)}
    \end{enumerate}
    \only<11->{\smallskip}
    \item<12-> Terminate when either
    \begin{itemize}\only<13-14>{\normalsize}
    \item<13-> finding a stable model (a solution for $\Delta_P\cup\Lambda_P$)
    \item<14-> deriving a conflict independently of (heuristic) choices
    \end{itemize}
  \end{itemize}
\end{frame}
% ----------------------------------------------------------------------
\begin{frame}[shrink=20]%
\input{solving/algorithms/algo-cdnl}
\end{frame}
% ----------------------------------------------------------------------
\begin{frame}{Observations}{decisions}
  \bigskip
  \begin{itemize}
  \item Decision level~$\mathit{dl}$, initially set to~$0$, is used to count
    \par
    the number of heuristically chosen literals in assignment~\ass
    \smallskip
  \item For a heuristically chosen literal
    $\sigma_{\!d}=\Tsigned{a}$ or $\sigma_{\!d}=\Fsigned{a}$,
    respectively,
    \par
    we require $a\in(\atom{P}\cup\body{P})\setminus(\tlits{\ass}\cup\flits{\ass})$
    \smallskip
  \item For any literal $\sigma\in\ass$,
    $\dlevel{\sigma}$ denotes the decision level of~$\sigma$,
    \par
    viz.\ the value $\mathit{dl}$ had when $\sigma$ was assigned
  \end{itemize}
\end{frame}
% ----------------------------------------------------------------------
\begin{frame}{Observations}{conflicts}
  \bigskip
  \begin{itemize}
  \item A conflict is detected from violation of a nogood $\varepsilon\subseteq\Delta_P\cup\nabla$
    \smallskip
  \item A conflict at decision level~$0$
    (where~\ass\ contains no heuristically chosen literals)
    indicates non-existence of stable models
    \smallskip
  \item A nogood $\delta$ derived by conflict analysis is
    \alert{asserting}, that is,\\
    some literal is unit-resulting for $\delta$ at a decision level $k<\mathit{dl}$
    % \pause
    \begin{itemize}\normalsize
    \item After learning~$\delta$ and backjumping to
      decision level~$k$,\\ at least one literal is
      newly derivable by unit propagation
    \smallskip
    \item No explicit flipping of heuristically chosen literals !
    \end{itemize}
  \end{itemize}
\end{frame}
% ----------------------------------------------------------------------
\begin{frame}{Example}
  \[
    P
    =
    \left\{
      \begin{array}{l}
        x  \leftarrow  \neg y\\
        y  \leftarrow  \neg x
      \end{array}
      \
      \begin{array}{l}
        u  \leftarrow x,y\\
        u  \leftarrow v
      \end{array}
      \
      \begin{array}{l}
        v  \leftarrow x\\
        v  \leftarrow u,y
      \end{array}
      \
      \begin{array}{l}
        w  \leftarrow \neg x,\neg y\\
        \mbox{~}
      \end{array}
    \right\}
  \]
  \medskip
  \[
    \begin{array}[b]{|c|cc|lcl|}
      \hline
      \mathit{dl}     &\sigma_{\!d}                             &\overline{\sigma}              &\delta                                                         &                    &
      \\\hline\hline
      \onslide<2->{1} &\onslide<2->{\Tsigned{u}}                &                               &                                                               &                    &
      \\\hline
      \onslide<3->{2} &\onslide<3->{\Fsigned{\{\neg x,\neg y\}}}&                               &                                                               &                    &
      \\
                      &                                         &\onslide<4->{\Fsigned{w}}      &\onslide<4->{\{\Tsigned{w},\Fsigned{\{\neg x,\neg y\}}\}}      &\onslide<4->{ =    }&\onslide<4->{\clno{w}}
      \\\hline
      \onslide<5->{3} &\onslide<5->{\Fsigned{\{\neg y\}}}       &                               &                                                               &                    &
      \\
                      &                                         &\onslide<6->{\Fsigned{x}}      &\onslide<6->{\{\Tsigned{x},\Fsigned{\{\neg y\}}\}}             &\onslide<6->{ =    }&\onslide<6->{\clno{x}}
      \\
                      &                                         &\onslide<6->{\Fsigned{\{x\}}}  &\onslide<6->{\{\Tsigned{\{x\}},\Fsigned{x}\}}                  &\onslide<6->{\in   }&\onslide<6->{\ClNo{\{x\}}}
      \\
                      &                                         &\onslide<6->{\Fsigned{\{x,y\}}}&\onslide<6->{\{\Tsigned{\{x,y\}},\Fsigned{x}\}}                &\onslide<6->{\in   }&\onslide<6->{\ClNo{\{x,y\}}}
      \\
                      &                                         &\onslide<7->{\vdots}           &                                                               &\onslide<7->{\vdots}&
      \\
                      &                                         &                               &\onslide<7->{\{\Tsigned{u},\Fsigned{\{x\}},\Fsigned{\{x,y\}}\}}&\onslide<7->{ =    }&\onslide<7->{\lambda(u,\{u,v\})}
      \\\hline
    \end{array}%
    ~\raisebox{1mm}{\onslide<7->{\KO}}
  \]
\end{frame}
% ----------------------------------------------------------------------
\begin{frame}{Example}
  \[
    P
    =
    \left\{
      \begin{array}{l}
        x  \leftarrow  \neg y\\
        y  \leftarrow  \neg x
      \end{array}
      \
      \begin{array}{l}
        u  \leftarrow x,y\\
        u  \leftarrow v
      \end{array}
      \
      \begin{array}{l}
        v  \leftarrow x\\
        v  \leftarrow u,y
      \end{array}
      \
      \begin{array}{l}
        w  \leftarrow \neg x,\neg y\\
        \mbox{~}
      \end{array}
    \right\}
  \]
  \medskip
  \[
    \begin{array}[b]{|c|cc|lcl|}
      \hline
      \mathit{dl} &\sigma_{\!d}                         &\overline{\sigma}                    &\delta                                                     &                    &
      \\\hline\hline
      1           &\alert<4>{\Tsigned{u}}               &\phantom{\Fsigned{\{x,y\}}}          &\phantom{\{\Tsigned{u},\Fsigned{\{x\}},\Fsigned{\{x,y\}}\}}&                    &\phantom{\lambda(u,\{u,v\})}
      \\
                  &\phantom{\Fsigned{\{\neg x,\neg y\}}}&\onslide<2->{\alert<4>{\Tsigned{x}}} &\onslide<2->{\{\Tsigned{u},\Fsigned{x}\}}                  &\onslide<2->{\in   }&\onslide<2->{\nabla}
      \\
                  &                                     &\onslide<3->{\vdots}                 &                                                           &\onslide<3->{\vdots}&
      \\
                  &                                     &\onslide<3->{\alert<4>{\Tsigned{v}}} &\onslide<3->{\{\Fsigned{v},\Tsigned{\{x\}}\}}              &\onslide<2->{\in   }&\onslide<2->{\ClNo{v}}
      \\
                  &                                     &\onslide<3->{\Fsigned{y}}            &\onslide<3->{\{\Tsigned{y},\Fsigned{\{\neg x\}}\}}         &\onslide<2->{ =    }&\onslide<2->{\clno{y}}
      \\
                  &                                     &\onslide<3->{\Fsigned{w}}            &\onslide<3->{\{\Tsigned{w},\Fsigned{\{\neg x,\neg y\}}\}}  &\onslide<2->{ =    }&\onslide<2->{\clno{w}}
      \\\hline
    \end{array}
    ~\raisebox{1mm}{\onslide<4->{\OK}}
  \]
\end{frame}
% ----------------------------------------------------------------------
%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../../main"
%%% End:
