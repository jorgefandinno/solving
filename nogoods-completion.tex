% ----------------------------------------------------------------------
\begin{frame}{Nogoods from logic programs}{via program completion}

The completion of a logic program $P$ can be defined as follows:
%
\begin{eqnarray*}
  &&
  \{
  v_B \leftrightarrow
  a_1          \wedge \dots \wedge a_m      \wedge
  \neg a_{m+1} \wedge \dots \wedge \neg a_n \mid
  \\&&\qquad\quad
  B \in\body{P} \text{ and }
  B = \{a_1,\dots,a_m,\neg a_{m+1},\dots,\neg a_n\}
  \}
  \\[6pt]
  &\cup&
  \{
  a \leftrightarrow
  v_{B_1} \vee \dots \vee v_{B_k}
  \mid
  \\&&\qquad\quad
  a\in\atom{P} \text{ and }
  \atbody{P}{a} = \{B_1,\dots,B_k\}
  \}\ ,
\end{eqnarray*}
%
where $\atbody{P}{a}=\{\body{r}\mid r\in P\text{ and }\head{r}=a\}$
\end{frame}
%------------------------------------------------------------
\begin{frame}{Nogoods from logic programs}{via program completion}

  \begin{itemize}
%  \item<1-> Let $B=\{a_1,\dots,a_m,\neg a_{m+1},\dots,\neg a_n\}$ be a body
  \item<1-> The (body-oriented) equivalence
    \[
    v_B \leftrightarrow
         a_1     \wedge\dots\wedge      a_m \wedge
    \neg a_{m+1} \wedge\dots\wedge \neg a_n
    \]
    can be decomposed into two implications:
    \medskip
    \begin{enumerate}
    \item<only@2>\normalsize
      \alert{%
      \(
      v_B \to
           a_1     \wedge\dots\wedge      a_m \wedge
      \neg a_{m+1} \wedge\dots\wedge \neg a_n
      \)}

      \smallskip
      is equivalent to the conjunction of
      \[
      \neg v_B \vee  a_1
      ,\ \dots,\
      \neg v_B \vee  a_m
      ,\
      \neg v_B \vee  \neg a_{m+1}
      ,\ \dots,\
      % \text{ and }
      \neg v_B \vee  \neg a_n
      \]
      and induces the set of nogoods
      \alert{\small%
        \[
        \ClNo{B}
        =
        \{\,\{\Tsigned{B},\Fsigned{a_1}\},
        \dots,
        \{\Tsigned{B},\Fsigned{a_m}\},
        \{\Tsigned{B},\Tsigned{a_{m+1}}\},
        \dots,
        \{\Tsigned{B},\Tsigned{a_n}\}\,\}
        \]
      }
    \item<only@3->\normalsize
      \alert{%
      \(
      a_1          \wedge \dots \wedge a_m      \wedge
      \neg a_{m+1} \wedge \dots \wedge \neg a_n
      \rightarrow v_B
      \)}

      \smallskip
      gives rise to the nogood
      \[
      \clno{B}
      =
      \alert{\{\Fsigned{B},\Tsigned{a_1},\dots,\Tsigned{a_m},\Fsigned{a_{m+1}},\dots,\Fsigned{a_n}\}}
      \]
      \bigskip
  \end{enumerate}
\end{itemize}
\end{frame}
%------------------------------------------------------------
\begin{frame}{Nogoods from logic programs}{via program completion}

  \begin{itemize}
  \item Analogously, the (atom-oriented) equivalence
    \[
    a \leftrightarrow v_{B_1} \vee \dots \vee v_{B_k}
    \]
    yields the nogoods
    \begin{enumerate}
    \item []
    \item
      \(
      \ClNo{a} = \{\,\{\Fsigned{a},\Tsigned{B_1}\},\dots,\{\Fsigned{a},\Tsigned{B_k}\}\,\}
      \)
      and
    \item []
    \item
      \(
      \clno{a} = \{\Tsigned{a},\Fsigned{B_1},\dots,\Fsigned{B_k}\}
      \)
    \item []
    \end{enumerate}
%  \item [] where $\body{a}=\{B_1,\dots,B_k\}$ dor an atom $a\in\atom{P}$
  \end{itemize}
\end{frame}
% ------------------------------------------------------------
\begin{frame}{Nogoods from logic programs}{atom-oriented nogoods}
  \begin{itemize}
  \item<1> For an atom $a$ where $\atbody{P}{a}=\{B_1,\dots,B_k\}$,
    we get
    \[
    \{\Tsigned{a},\Fsigned{B_1},\dots,\Fsigned{B_k}\}
    \quad\text{and}\quad
    \{\,\{\Fsigned{a},\Tsigned{B_1}\},\dots,\{\Fsigned{a},\Tsigned{B_k}\}\,\}
    \]
  \item<2-> \structure{Example} \
    Given Atom~$x$ with $\body{x}=\{\{y\},\{\neg z\}\}$, we obtain
    \arrayrulewidth=.3pt
    \[
    \begin{array}{|rcl|}
      \hline
      \only<9>{\color{red}}\only<13-14>{\color{green}}x&\leftarrow&\only<8-9,13-14>{\color{red}}y\\
      \only<9>{\color{red}}\only<13-14>{\color{green}}x&\leftarrow&\only<8-9>{\color{red}}\only<14>{\color{green}}\neg z\\
      \hline
    \end{array}
    \qquad\qquad
    \begin{array}{p{5pt}l}
      &\alert<4>{\{\Tsigned{x},\Fsigned{\{y\}},\Fsigned{\{\neg z\}}\}}
      \\[2pt]
      &\{\,\{\Fsigned{x},\Tsigned{\{y\}}\},\{\Fsigned{x},\Tsigned{\{\neg z\}}\}\,\}
    \end{array}
    \]
  \item<3-> [] For \alert<4>{nogood}
    \(
    \alert<4>{\{
      \Tsigned{\only<6-7,11-12>{\color{green}}x},
      \Fsigned{\only<6-7,11-12>{\color{red}}\{y\}},
      \Fsigned{\only<6-7,11-12>{\color{red}}\{\neg z\}}
      \}},
    \)
    the signed literal
    \begin{itemize}
    \item<5-9> \Fsigned{\only<7,9>{\color{red}}x} is unit-resulting  wrt \alert<5>{assignment}
      \(
      (\Fsigned{\only<5-9>{\color{red}}{\{y\}}},\Fsigned{\only<5-9>{\color{red}}\{\neg z\}})
      \)
      and
    \item<10-> \Tsigned{\only<12,14>{\color{green}}\{\neg z\}} is unit-resulting  wrt assignment
      \(
      (\Tsigned{\only<10-14>{\color{green}}x},\Fsigned{\only<10-14>{\color{red}}\{y\}})
      \)
    \end{itemize}
  \end{itemize}
\end{frame}
%------------------------------------------------------------
\begin{frame}{Nogoods from logic programs}{body-oriented nogoods}
  \begin{itemize}
  \item <1> For a body $B=\{a_1,\dots,a_m,\neg a_{m+1},\dots,\neg a_n\}$, %\pause,
    we get
    \vspace{-2pt}
    \[
    \begin{array}{l}
      \{\Fsigned{B},\Tsigned{a_1},\dots,\Tsigned{a_m},\Fsigned{a_{m+1}},\dots,\Fsigned{a_n}\}
      \\[2pt]
      \{\,
      \{\Tsigned{B},\Fsigned{a_1}\},
      \dots,
      \{\Tsigned{B},\Fsigned{a_m}\},
      \{\Tsigned{B},\Tsigned{a_{m+1}}\},
      \dots,
      \{\Tsigned{B},\Tsigned{a_n}\}
      \,\}
    \end{array}
  \]
  \item<2-> \structure{Example} \
    Given Body~$\{x,\neg y\}$, we obtain
    \arrayrulewidth=.3pt
    \[
    \begin{array}{@{}|r@{}l|}
      \hline
      \ldots\leftarrow{}&x,\neg y\\[-1.2ex]
      &\quad\vdots\\[-3pt]
      \ldots\leftarrow{}&x,\neg y\\
      \hline
    \end{array}
    \quad\quad
    \begin{array}{p{5pt}l}
      &\{\Fsigned{\{x,\neg y\}},\Tsigned{x},\Fsigned{y}\}
      \\[2pt]
      &\{\,\{\Tsigned{\{x,\neg y\}},\Fsigned{x}\},\{\Tsigned{\{x,\neg y\}},\Tsigned{y}\}\,\}
    \end{array}
    \]
  \item<3-> []
    For nogood $\clno{\{x,\neg y\}}=\{\Fsigned{\{x,\neg y\}},\Tsigned{x},\Fsigned{y}\}$,
    the signed literal
    \begin{itemize}
    \item \Tsigned{\{x,\neg y\}} is unit-resulting  wrt assignment $(\Tsigned{x},\Fsigned{y})$
      and
    \item \Tsigned{y}                    is unit-resulting  wrt assignment $(\Fsigned{\{x,\neg y\}},\Tsigned{x})$
    \end{itemize}
  \end{itemize}
\end{frame}
%------------------------------------------------------------
\begin{frame}{Characterization of stable models}{for \alert<3>{tight} logic programs\only<3>{, ie.\ \alert{free of positive recursion}}}
\bigskip
Let $P$ be a logic program and
\[
\begin{array}{lcr@{}c@{}l}
\Delta_P
& = &
% \phantom{\cup\ }
\{\clno{a} \mid a\in\atom{P}\}
& {} \cup {} &
\{\delta\in\ClNo{a} \mid a\in\atom{P}\}
\\[2pt]
& \cup &
\{\clno{B} \mid B\in\body{P}\}
& {} \cup {} &
\{\delta\in\ClNo{B}\mid B\in\body{P}\}
\end{array}
\]
\bigskip
\pause
\begin{theorem}
Let $P$ be a \alert{tight} logic program. Then,

\qquad $X\subseteq\atom{P}$ is a stable model of~$P$ \alert{iff}

\qquad $X=\tlits{\ass}\cap\atom{P}$ for a (unique) solution \ass\ for $\Delta_P$
\end{theorem}
% \pause
% \begin{itemize}
% \item [\ithand] The set $\Delta_P$ of nogoods captures inferences from
% \\  (program $P$ and) program completion
% \end{itemize}
\end{frame}
% ----------------------------------------------------------------------
%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../../main"
%%% End:
